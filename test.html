<!doctype html>
<html>
	<head>
		<title>Daisy Editor</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
		<script type="text/javascript" src="js/jquery-1.5.1.js"></script>
		<script type="text/javascript" src="js/js-printf.js"></script>

		<script type="text/javascript">
			$.log = function(msg) {
				if( typeof console !== 'undefined')
					console.log(msg);
			}
			function dbl_test(e) {
				$.log(e)
			}

			function kmp_next(str) {
				var len = str.length, n_arr = new Array(len);
				if(len === 0)
					return n_arr;
				n_arr[0] = -1;
				for(var i = 1; i < len; i++) {
					var j = i - 1;
					while(n_arr[j] >= 0 && str[i] !== str[n_arr[j]]) {
						j = n_arr[j] - 1;
					}
					n_arr[i] = n_arr[j] + 1;
				}
				return n_arr;
			}

			function kmp_search(src, dst) {
				var s_l = src.length, d_l = dst.length;
				if(s_l === 0)
					return -1;
				if(d_l === 0)
					return 0;
				var d_next = kmp_next(dst), idx = 0;
				for(var i = 0; i < s_l; i++) {
					while(true) {
						if(src[i] === dst[idx]) {
							idx++;
							if(idx === d_l) {
								return i - idx + 1;
							}
							break;
						} else if(idx === 0) {
							break;
						} else {
							idx = d_next[idx];
						}
					}
				}
				return -1;
			}

			function deal_keydown(e) {
				$.log(e.keyCode);
			}

			$(function() {
				$("#txtbox").bind("copy paste",function(e){
					$.log(e)
					$.log($("#txtbox").val())
				});
			})
			function e_com(e){
				$.log(e)
			}
		 
		</script>
	</head>
	<body>
		<div contenteditable="true">
			<p>
				Hello World
			</p>
		</div>
		<div ondblclick="dbl_test(event);">
			<textarea id="txtbox" type="text" value="更重要强大" ></textarea>
<br/>			<input type="button" value="test" id="btn-test" onclick="do_test();"/>
			<br/>
			<div>
				hello world.4323.3ad_a 葛羽航你好   da ^#@.
			</div>
		</div>
		<div>
			<canvas style="border:1px solid blue;" id="c_test"></canvas>
		</div>
	</body>
</html>